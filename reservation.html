<!DOCTYPE html>


<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RentMeNow</title>
    <link rel="stylesheet" href="assests/css/style.css">
    <!-- <link rel="stylesheet" href="assests/css/style-contact2.css"> -->
    <link rel="stylesheet" href="assests/css/style-reservation.css">

    <script>
        //moto ; citadine ; compact;  berline;  utilitaire; engin de chantier;  camion
        var stock_prices = [10, 12, 14, 20, 16, 900, 250];
        //Electric,  hybride,  essence , diesel
        var percentage_prices = [5, 9, 14, 21];
        var automatic_percentage = 19;
        function getIndex(carburant, lookFor) {
            for (let i = 0; i < carburant.length; i++) {
                if (carburant[i].text === lookFor) {
                    return i;
                }
            }
            return -1;
        }

        function changelist() {
            let index;
            let lookFor = [];
            let createElem = [];
            let new_option = document.createElement("option");

            let type = document.getElementById("type");
            let type_value = type.options[type.selectedIndex].value;

            let carburant = document.getElementById("carburant");
            let carburant_value = carburant.options[carburant.selectedIndex].value;
            // let option = carburant.options;

            let boite = document.getElementById("boite");
            let boite_elem = ["Manuelle", "Automatique"];

            switch (type_value) {
                case "moto":
                    lookFor = ["Diesel", "Hybride"];
                    createElem = ["Electrique", "Essence"];
                    for (let i = 0; i < lookFor.length; i++) {
                        index = getIndex(carburant.options, lookFor[i]);
                        if (index !== -1) {
                            // console.log(option[index].value);
                            carburant.remove(index);
                        }
                    }
                    for (let j = 0; j < createElem.length; j++) {
                        index = getIndex(carburant.options, createElem[j]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            // option.value = createElem[j];
                            // option.append(createElem[j]);
                            option.text = createElem[j];
                            carburant.add(option);
                        }
                    }

                    for (let k = 0; k < boite_elem.length; k++) {
                        index = getIndex(boite.options, boite_elem[k]);
                        if (index !== -1) {
                            // console.log(option[index].value);
                            boite.remove(index);
                        }
                    }
                    // option[0].disabled = true;
                    break;

                case "compact":
                    lookFor = ["Electrique"];
                    createElem = ["Hybride", "Essence", "Diesel"];

                    for (let i = 0; i < lookFor.length; i++) {
                        index = getIndex(carburant.options, lookFor[i]);
                        if (index !== -1) { carburant.remove(index); }
                    }

                    for (let j = 0; j < createElem.length; j++) {
                        index = getIndex(carburant.options, createElem[j]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            // option.value = createElem[j];
                            // option.append(createElem[j]);
                            option.text = createElem[j];
                            carburant.add(option);
                        }
                    }

                    for (let k = 0; k < boite_elem.length; k++) {
                        index = getIndex(boite.options, boite_elem[k]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            // option.value = boite_elem[k];
                            // option.append(createElem[j]);
                            option.text = boite_elem[k];
                            boite.add(option);
                        }
                        boite.remove(1);
                    }
                    boite.remove(1);
                    break;

                case "citadin":
                    // lookFor = [];
                    createElem = ["Hybride", "Essence", "Diesel", "Electrique"];

                    // for (let i = 0; i < lookFor.length; i++) {
                    //     index = getIndex(carburant.options, lookFor);
                    //     if (index !== -1) { carburant.remove(index); }
                    // }

                    for (let j = 0; j < createElem.length; j++) {
                        index = getIndex(carburant.options, createElem[j]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            option.value = createElem[j];
                            // option.append(createElem[j]);
                            option.text = createElem[j];
                            carburant.add(option);
                        }
                    }
                    for (let k = 0; k < boite_elem.length; k++) {
                        index = getIndex(boite.options, boite_elem[k]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            // option.value = boite_elem[k];
                            // option.append(createElem[j]);
                            option.text = boite_elem[k];
                            boite.add(option);
                        }

                    }
                    boite.remove(1);
                    break;


                case "utilitaire":
                    lookFor = ["Electrique", "Hybride", "Essence"];
                    createElem = ["Diesel"];
                    for (let i = 0; i < lookFor.length; i++) {
                        index = getIndex(carburant.options, lookFor[i]);
                        if (index !== -1) { carburant.remove(index); }
                    }

                    for (let j = 0; j < createElem.length; j++) {
                        index = getIndex(carburant.options, createElem[j]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            option.value = createElem[j];
                            // option.append(createElem[j]);
                            option.text = createElem[j];
                            carburant.add(option);
                        }
                    }

                    for (let k = 0; k < boite_elem.length; k++) {
                        index = getIndex(boite.options, boite_elem[k]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            // option.value = boite_elem[k];
                            // option.append(createElem[j]);
                            option.text = boite_elem[k];
                            boite.add(option);
                        }
                    }
                    boite.remove(1);
                    break;

                case "berlin":
                    lookFor = ["Electrique"];
                    createElem = ["Diesel", "Hybride", "Essence"];
                    for (let i = 0; i < lookFor.length; i++) {
                        index = getIndex(carburant.options, lookFor[i]);
                        if (index !== -1) { carburant.remove(index); }
                    }

                    for (let j = 0; j < createElem.length; j++) {
                        index = getIndex(carburant.options, createElem[j]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            option.value = createElem[j];
                            // option.append(createElem[j]);
                            option.text = createElem[j];
                            carburant.add(option);
                        }
                    }

                    for (let k = 0; k < boite_elem.length; k++) {
                        index = getIndex(boite.options, boite_elem[k]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            // option.value = boite_elem[k];
                            // option.append(createElem[j]);
                            option.text = boite_elem[k];
                            boite.add(option);
                        }
                    }
                    boite.remove(0);
                    break;

                case "camion":
                    lookFor = ["Electrique", "Hybride", "Essence"];
                    createElem = ["Diesel"];
                    for (let i = 0; i < lookFor.length; i++) {
                        index = getIndex(carburant.options, lookFor[i]);
                        if (index !== -1) { carburant.remove(index); }
                    }

                    for (let j = 0; j < createElem.length; j++) {
                        index = getIndex(carburant.options, createElem[j]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            option.value = createElem[j];
                            // option.append(createElem[j]);
                            option.text = createElem[j];
                            carburant.add(option);
                        }
                    }

                    for (let k = 0; k < boite_elem.length; k++) {
                        index = getIndex(boite.options, boite_elem[k]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            // option.value = boite_elem[k];
                            // option.append(createElem[j]);
                            option.text = boite_elem[k];
                            boite.add(option);
                        }
                    }
                    boite.remove(0);
                    break;

                case "engin_chantier":
                    lookFor = ["Electrique", "Hybride"];
                    createElem = ["Essence", "Diesel"];

                    for (let i = 0; i < lookFor.length; i++) {
                        index = getIndex(carburant.options, lookFor[i]);
                        if (index !== -1) { carburant.remove(index); }
                    }

                    for (let j = 0; j < createElem.length; j++) {
                        index = getIndex(carburant.options, createElem[j]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            option.value = createElem[j];
                            // option.append(createElem[j]);
                            option.text = createElem[j];
                            carburant.add(option);
                        }
                    }

                    for (let k = 0; k < boite_elem.length; k++) {
                        index = getIndex(boite.options, boite_elem[k]);

                        if (index === -1) {
                            let option = document.createElement('option');
                            // option.value = boite_elem[k];
                            // option.append(createElem[j]);
                            option.text = boite_elem[k];
                            boite.add(option);
                        }
                    }
                    boite.remove(1);
                    break;

            }

            price_calc();
        }

        function price_calc() {
            let duration = document.getElementById("duration").value;
            let options = document.getElementById("type").options;
            let type = options[options.selectedIndex].value;
            let carburant_select = document.getElementById("carburant");
            let carburant = carburant_select.options[carburant_select.selectedIndex].text;

            // let boite_vit_select = document.getElementById("boite");
            // let boite_vit = boite_vit_select.options[boite_vit_select.selectedIndex].value;
            // let price = document.getElementById("price");
            let price = document.getElementById("output");
            let price_int;

            if (duration != 0) { //check duration if diff than 0 just to not display percentage added to price
                switch (type) {
                    case "moto":
                        if (carburant === "Essence") {
                            price_int = stock_prices[0] * parseInt(duration) + stock_prices[0] * percentage_prices[2] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";
                            // console.log(price_int);
                        }

                        else if (carburant === "Electrique") {
                            price_int = stock_prices[0] * parseInt(duration) + stock_prices[0] * percentage_prices[0] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }

                        break;

                    case "compact":
                        if (carburant === "Essence") {
                            price_int = stock_prices[2] * parseInt(duration) + stock_prices[2] * percentage_prices[2] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }

                        else if (carburant === "Diesel") {
                            price_int = stock_prices[2] * parseInt(duration) + stock_prices[2] * percentage_prices[3] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }

                        else if (carburant === "Hybride") {
                            price_int = stock_prices[2] * parseInt(duration) + stock_prices[2] * percentage_prices[1] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }
                        break;

                    case "citadin":
                        if (carburant === "Essence") {
                            price_int = stock_prices[1] * parseInt(duration) + stock_prices[1] * percentage_prices[2] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";

                        }
                        else if (carburant === "Electrique") {
                            price_int = stock_prices[1] * parseInt(duration) + stock_prices[1] * percentage_prices[0] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }

                        else if (carburant === "Diesel") {
                            price_int = stock_prices[1] * parseInt(duration) + stock_prices[1] * percentage_prices[3] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }

                        else if (carburant === "Hybride") {
                            price_int = stock_prices[1] * parseInt(duration) + stock_prices[1] * percentage_prices[1] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }
                        break;


                    case "utilitaire":
                        if (carburant === "Diesel") {
                            price_int = stock_prices[4] * parseInt(duration) + stock_prices[4] * percentage_prices[3] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }

                        break;

                    case "berlin":
                        if (carburant === "Essence") {
                            price_int = stock_prices[3] * parseInt(duration) + stock_prices[3] * (percentage_prices[2] + automatic_percentage / 100);
                            price.innerHTML = "Total Price : " + price_int + "€";

                        }
                        else if (carburant === "Diesel") {
                            price_int = stock_prices[3] * parseInt(duration) + stock_prices[3] * (percentage_prices[3] + automatic_percentage / 100);
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }

                        else if (carburant === "Hybride") {
                            price_int = stock_prices[3] * parseInt(duration) + stock_prices[3] * (percentage_prices[1] + automatic_percentage / 100);
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }
                        break;

                    case "camion":
                        if (carburant === "Diesel") {
                            price_int = stock_prices[6] * parseInt(duration) + stock_prices[6] * (percentage_prices[3] + automatic_percentage / 100);
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }
                        break;

                    case "engin_chantier":
                        if (carburant === "Essence") {
                            price_int = stock_prices[5] * parseInt(duration) + stock_prices[5] * percentage_prices[2] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";

                        }

                        else if (carburant === "Diesel") {
                            price_int = stock_prices[5] * parseInt(duration) + stock_prices[5] * percentage_prices[3] / 100;
                            price.innerHTML = "Total Price : " + price_int + "€";
                        }
                        break;
                }
            }

        }
        function popupmsg() {
            // e.preventDefault();
            // let name = document.getElementById("name").value;
            // let email = document.getElementById("mail").value;
            // let msg = document.getElementById("msg").value;
            // let sujet = document.getElementById("sujet").value;
            // alert("Name : " + name + "\nEmail : " + email + "\nSujet: " + sujet + "\nMessage: " + msg);
            let price = document.getElementById("output");
            prompt("Total rent price : ", price.innerHTML);

        }
    </script>
</head>

<body>
    <header>
        <div class="container">
            <div><a href="home.html"><img class="logo" src="./assests/img/logo.png"></a></div>
            <nav>
                <ul style="float: right">
                    <li><a href="home.html">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="#">Reservation</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>

    </header>

    <main>
        <div class="contact">
            <form>
                <ul>
                    <li>
                        <label for="type">Vehicle type:</label>
                        <select id="type" name="veh_type" onchange="changelist()">
                            <option value="moto">Moto</option>
                            <option value="compact">Compact</option>
                            <option value="citadin">Citadin</option>
                            <option value="utilitaire">Utilitaire</option>
                            <option value="berlin">Berlin</option>
                            <option value="camion">Camion</option>
                            <option value="engin_chantier">Engin de chantier</option>
                        </select>
                    </li>
                    <li>
                        <label for="carburant">Carburant:</label>
                        <select id="carburant" name="veh_carburant" onchange="price_calc()">
                            <option value="essence">Essence</option>
                            <!-- <option value="diesel">Diesel</option> -->
                            <option value="electric">Electrique</option>
                            <!-- <option value="hybride">Hybride</option> -->
                        </select>
                    </li>
                    <li>
                        <label for="boite">Boite à vitesse:</label>
                        <!-- <textarea id="sujet" name="user_subject"></textarea> -->
                        <select id="boite" name="boite_vit">
                            <!-- <option value="manuel">Manuelle</option> -->
                            <!-- <option value="automatic">Automatique</option> -->
                        </select>
                    </li>
                    <li>
                        <label for="duration">Durée (jours):</label>
                        <input type="number" id="duration" name="reserv_duration" min="1" max="30" value="0"
                            oninput="price_calc()">
                    </li>
                    <li>
                        <label for="start">Date de début:</label>
                        <input type="date" id="start" name="reserv-start" value="2022-01-03" min="2022-01-03">
                    </li>
                    <li>
                        <!-- <label for="price">Total price:</label>
                        <output id="price" name="vehi_price" for=""></output> -->
                        <h4 id="output">
                        </h4>
                        <!-- <output id="price" name="vehi_price" for ="a b"></output> -->
                    </li>
                    <li class="button">
                        <button onclick="popupmsg()" type="submit">Submit</button>
                    </li>
                </ul>
            </form>
        </div>

    </main>

    <footer>
        <div class="before-footer">
            <nav class="social-media">
                <ul>
                    <li><a href="#">Twitter<a></li>
                    <li><a href="#">Insta<a></li>
                    <li><a href="#">fb<a></li>
                    <li><a href="#">Linkedin<a></li>
                </ul>
            </nav>
        </div>
        <div class="footer-bar">
            <h3>All Copyrights are reserved Ⓒ, 2021</h3>
        </div>
    </footer>
</body>

</html>